<!DOCTYPE html>
<html lang="en">
<head>
    <!-- This helps keep the web page aligned and readable when the width changes -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Details | Silent Library</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font from Google -->
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Common CSS styles -->
    <link href="css/common.css" rel="stylesheet">
   
    <!-- Page-specific CSS -->
    <style>
        .book-container {
            max-width: 900px;
            margin: 30px auto;
            padding: 30px;
            background-color: #F1E9D2;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            color: #191970;
        }
        
        .book-title {
            color: #191970;
            border-bottom: 2px solid #191970;
            padding-bottom: 10px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .book-image {
            max-width: 300px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            margin-right: 30px;
            float: left;
        }
        
        .book-info {
            overflow: hidden;
            color: #191970;
        }
        
        .book-info h3 {
            color: #0f0f4d;
            margin-bottom: 20px;
        }
        
        .book-info p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .availability-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            color: #191970;
        }
        /* applies these parameters to cells in the table with this class */
        .availability-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #AFDBF5;
            vertical-align: middle;
        }
        /* this style applies striped (alternating row) effect to the table */
        .availability-table tr:nth-child(even) {
            background-color: rgba(175, 219, 245, 0.2);
        }
        /* this style changes the background color when the parts of the table is moused over */
        .availability-table tr:hover {
            background-color: rgba(175, 219, 245, 0.4);
        }
        
        .center-col {
            text-align: center;
        }
        
        .borrow-btn {
            background-color: #0f0f4d;
            color: #F1E9D2;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            margin: 0 auto;
        }
        /* this style changes the background color when the button is moused over */
        .borrow-btn:hover {
            background-color: #191970;
        }
        /* this is the button when disabled */
        .borrow-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        /* ===== Added styles for jQuery popup ===== */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 1000;
        }
        
        .popup-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #F1E9D2;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            color: #191970;
            max-width: 400px;
            text-align: center;
        }
        
        .popup-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .popup-btn {
            background-color: #0f0f4d;
            color: #F1E9D2;
            border: none;
            padding: 8px 20px;
            border-radius: 4px;
            margin-top: 20px;
            cursor: pointer;
        }
        /* ===== End of jQuery popup styles ===== */
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .book-image {
                float: none;
                display: block;
                margin: 0 auto 20px;
                max-width: 200px;
            }
            
            .book-container {
                padding: 20px;
            }
            
            .availability-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Sticky Header -->
    <header class="sticky-header">
        <!-- Top Section with Logo, Title & Login -->
        <div class="header-main">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col logo-container" id="homeLink">
                        <!-- Logo Image & Title -->
                        <img src="images/silent-library-logo.png" alt="Library Logo" class="logo-img">
                        <span class="header-title">Silent Library</span>
                    </div>
                    <div class="col-auto">
                        <!-- Login Section -->
                        <!-- This will dynamically change based on login status -->
                        <div id="loginSection"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="header-nav">
            <div class="container">
                <!-- This will dynamically change based on login status -->
                <div class="d-flex align-items-center" id="navSection"></div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="book-container">
            <h1 class="book-title">Book Details</h1>
            <!-- This section in this version is currently filled with placeholder details  -->
            <!-- In live version book details should be pulled from the database     -->
            <div class="container">
                <img src="images/book-fiction-3.jpeg" alt="Book Cover" class="book-image">
                <div class="book-info">
                    <h3><strong>Title:</strong> Gone with the Wind</h3>
                    <p><strong>Author:</strong> Margaret Mitchell</p>
                    <p><strong>Publisher:</strong> Macmillan</p>
                    <p><strong>Publication Date:</strong> 30 Jun 1936</p>
                    <p><strong>ISBN:</strong> 9780446365383</p>
                    <p><strong>Description:</strong> In April of 1861, Scarlett O'Hara is in love with Ashley and learns about his engagement. Despite warnings from her family, Scarlett intends to throw herself at Ashley at the event at Twelve Oaks.</p>
                    <!-- In live version the availibility/borrow data will interact with backend     -->
                    <table class="availability-table">
                        <tr>
                            <td>Paperback</td>
                            <td class="center-col">Available</td>
                            <td class="center-col">2 in Library</td>
                        </tr>
                        <tr>
                            <td>EPUB</td>
                            <td class="center-col">Available</td>
                            <td><button class="borrow-btn">Borrow</button></td>
                        </tr>
                        <tr>
                            <td>MOBI</td>
                            <td class="center-col">Unavailable</td>
                            <td><button class="borrow-btn" disabled>Borrow</button></td>
                        </tr>
                        <tr>
                            <td>PDF</td>
                            <td class="center-col">Available</td>
                            <td><button class="borrow-btn">Borrow</button></td>
                        </tr>
                        <tr>
                            <td>AudioBook</td>
                            <td class="center-col">Available</td>
                            <td><button class="borrow-btn">Borrow</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </main>
    <!-- Common footer     -->
    <footer class="common-footer">
        <div class="container">
            <div class="footer-content">
                <!-- Footer buttons -->
                <div class="footer-buttons">
                    <button class="footer-button" id="footerTop">Top of Page</button>
                    <button class="footer-button" id="footerAbout">About Us</button>
                    <button class="footer-button" id="footerPrivacy">Privacy Policy</button>
                    <button class="footer-button" id="footerContacts">Contacts</button>
                    <button class="footer-button" id="footerSitemap">Sitemap</button>
                </div>
                <!-- Footer credits -->
                <div class="footer-credits">
                    <span>Created by Pixel Elites</span>
                    <img src="images/pixel-elites.png" alt="Pixel Elites Logo" class="footer-logo">
                </div>
            </div>
        </div>
    </footer>

    <!-- Script for bootstrap     -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- ===== jQuery library | Required for the borrow confirmation popup functionality -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- ===== Popup HTML structure | This will be shown when borrow button is clicked -->
    <div class="popup-overlay" id="borrowPopup">
        <div class="popup-content">
            <span class="popup-close">&times;</span>
            <h3>Success!</h3>
            <p id="borrowMessage">eBook has been borrowed and is available to be downloaded to your device.</p>
            <button class="popup-btn" id="popupOk">OK</button>
        </div>
    </div>
    
    <!-- Script for common javascript     -->
    <script src="js/common.js"></script>
    
    <!-- ===== jQuery script for borrow functionality | Handles the borrow button clicks and shows confirmation popup -->
    <script>
        $(document).ready(function() {
            // Handle click on borrow buttons
            $('.borrow-btn:not(:disabled)').click(function() {
                // Get the format name from first column
                var format = $(this).closest('tr').find('td:first').text();
                
                // Update message with specific format
                $('#borrowMessage').text(
                    format + ' has been borrowed and is available to be downloaded to your device.'
                );
                
                // Show the popup
                $('#borrowPopup').fadeIn();
            });
            
            // Close popup when clicking X or OK button
            $('.popup-close, #popupOk').click(function() {
                $('#borrowPopup').fadeOut();
            });
            
            // Close popup when clicking outside of it
            $(document).mouseup(function(e) {
                var popup = $('#borrowPopup');
                if (!popup.is(e.target) && popup.has(e.target).length === 0) {
                    popup.fadeOut();
                }
            });
        });
    </script>
</body>
</html>